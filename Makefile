# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: hakoh <hakoh@student.42.fr>                +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2021/09/15 17:17:36 by hakoh             #+#    #+#              #
#    Updated: 2021/10/16 19:51:30 by hakoh            ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

# ---------------------------------------------------------------------------- #
############################### PROGRAM NAME ###################################
# ---------------------------------------------------------------------------- #
NAME		=	so_long

# ---------------------------------------------------------------------------- #
############################### COMPILATION ####################################
# ---------------------------------------------------------------------------- #
CC 			=	clang

# ---------------------------------------------------------------------------- #
################################## FLAGS #######################################
# ---------------------------------------------------------------------------- #
CFLAGS		=	-Wall -Wextra -Werror

# ---------------------------------------------------------------------------- #
################################# INCLUDES #####################################
# ---------------------------------------------------------------------------- #
INCLUDES	=	-I $(PATH_INC)				\
				-I $(PATH_LIBFT)inc/		\
				-I $(PATH_MLX)

# ---------------------------------------------------------------------------- #
################################# SOURCES ######################################
# ---------------------------------------------------------------------------- #
SRCS		=	$(addprefix $(PATH_SRCS),	\
				$(addsuffix .c,				\
				main						\
				error						\
				parsing						\
				free						\
				coll_doors					\
				check_map					\
				parse_line					\
				manage						\
				render						\
				textures					\
				engine))

# ---------------------------------------------------------------------------- #
################################## OBJECTS #####################################
# ---------------------------------------------------------------------------- #
OBJS		=	$(SRCS:.c=.o)

# ---------------------------------------------------------------------------- #
################################### PATHS ######################################
# ---------------------------------------------------------------------------- #
PATH_INC	=	./inc/
PATH_SRCS	=	./src/
PATH_LIBFT	=	./libft/
PATH_MLX	=	./minilibx-linux/

# ---------------------------------------------------------------------------- #
################################# LIBRARIES ####################################
# ---------------------------------------------------------------------------- #
LDFLAGS		=	-L$(PATH_LIBFT) -L$(PATH_MLX)
LDLIBS		=	-lft -lmlx -lXext -lX11

# ---------------------------------------------------------------------------- #
################################### RULES ######################################
# ---------------------------------------------------------------------------- #
all: $(NAME)

$(NAME): $(OBJS)
	$(MAKE) -C $(PATH_LIBFT)
	$(MAKE) -C $(PATH_MLX)
	$(CC) -o $@ $^ $(CFLAGS) $(LDFLAGS) $(LDLIBS)

%.o: %.c Makefile $(PATH_INC)so_long.h
	$(CC) -o $@ -c $< $(CFLAGS) $(INCLUDES)

clean:
	$(MAKE) -C $(PATH_LIBFT) clean
	$(MAKE) -C $(PATH_MLX) clean
	rm -rf $(OBJS)

fclean: clean
	$(MAKE) -C $(PATH_LIBFT) fclean
	rm -rf $(NAME)

re:	fclean all

# ---------------------------------------------------------------------------- #
################################## OTHER #######################################
# ---------------------------------------------------------------------------- #
.PHONY		: all clean fclean re